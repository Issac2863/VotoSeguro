<div class="login-page">
    <div class="login-container">
        <div class="login-card">
            <!-- Icono de usuario -->
            <div class="user-icon-wrapper">
                <div class="user-icon">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
                </div>
            </div>

            <!-- Título -->
            <h1 class="login-title">Autenticación de Votante</h1>
            <p class="login-subtitle">Ingrese sus credenciales para acceder al sistema</p>

            <!-- Indicador de pasos -->
            <div class="step-indicator">
                <span class="step-current">Paso {{ currentStep }} de 3</span>
                <span class="step-label">{{ stepLabels[currentStep - 1] }}</span>
            </div>

            <!-- PASO 1: Credenciales -->
            <div class="step-content" *ngIf="currentStep === 1">
                <div class="info-box">
                    <div class="info-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2" />
                        </svg>
                    </div>
                    <div class="info-content">
                        <h3>Ingrese sus credenciales</h3>
                        <p>Use su cédula ecuatoriana o pasaporte junto con su código dactilar para autenticarse.</p>
                    </div>
                </div>

                <form [formGroup]="credentialsForm">
                    <!-- Tipo de documento -->
                    <div class="form-group">
                        <label class="form-label">Tipo de Documento</label>
                        <select class="form-input" formControlName="documentType">
                            <option value="cedula">Cédula Ecuatoriana</option>
                            <option value="pasaporte">Pasaporte</option>
                        </select>
                    </div>

                    <!-- Número de documento -->
                    <div class="form-group">
                        <label class="form-label">Número de Documento</label>
                        <input type="text" class="form-input" formControlName="documentNumber"
                            placeholder="Ej: 1712345678">
                    </div>

                    <!-- Código dactilar -->
                    <div class="form-group">
                        <label class="form-label">Código Dactilar</label>
                        <input type="password" class="form-input" formControlName="fingerprintCode"
                            placeholder="••••••••••">
                        <small class="form-hint">El código dactilar se encuentra en su cédula de identidad</small>
                    </div>
                </form>

                <button class="btn btn-primary btn-block" (click)="nextStep()">
                    Continuar
                </button>
            </div>

            <!-- PASO 2: Verificación Facial -->
            <div class="step-content" *ngIf="currentStep === 2">
                <div class="info-box">
                    <div class="info-icon camera-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    </div>
                    <div class="info-content">
                        <h3>Verificación Facial</h3>
                        <p>Se accederá a la cámara de su dispositivo para verificar su identidad mediante reconocimiento
                            facial.</p>
                    </div>
                </div>

                <div class="camera-preview">
                    <div class="camera-placeholder">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                        </svg>
                        <p>Presione el botón para activar la cámara</p>
                    </div>
                </div>

                <button class="btn btn-primary btn-block" (click)="nextStep()">
                    <svg class="btn-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                    </svg>
                    Activar Cámara y Verificar
                </button>
            </div>

            <!-- PASO 3: Código por Email -->
            <div class="step-content" *ngIf="currentStep === 3">
                <div class="info-box" *ngIf="!codeSent">
                    <div class="info-icon email-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                        </svg>
                    </div>
                    <div class="info-content">
                        <h3>Se enviará un código</h3>
                        <p>Se enviará un código de 8 dígitos a<br><strong>{{ maskedEmail }}</strong></p>
                        <p class="info-warning">Si este no es su correo, comuníquese con soporte técnico.</p>
                    </div>
                </div>

                <div class="info-box success" *ngIf="codeSent">
                    <div class="info-icon email-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <div class="info-content">
                        <h3>Código enviado</h3>
                        <p>Hemos enviado un código de verificación a<br><strong>{{ maskedEmail }}</strong></p>
                        <p class="info-warning">Si este no es su correo, comuníquese con soporte técnico.</p>
                    </div>
                </div>

                <div *ngIf="!codeSent">
                    <button class="btn btn-primary btn-block" (click)="sendCode()">
                        Enviar código
                    </button>
                </div>

                <div *ngIf="codeSent">
                    <div class="form-group">
                        <label class="form-label">Código de Verificación</label>
                        <input type="text" class="form-input code-input" [(ngModel)]="verificationCode"
                            placeholder="1 2 3 4 5 6 7 8" maxlength="8">
                    </div>

                    <button class="btn btn-primary btn-block" (click)="verifyAndLogin()">
                        Verificar e Ingresar
                    </button>
                </div>
            </div>

            <!-- Botón Volver -->
            <button class="btn btn-outline btn-block" (click)="previousStep()" *ngIf="currentStep > 1 || codeSent">
                Volver
            </button>

            <a routerLink="/" class="btn btn-outline btn-block" *ngIf="currentStep === 1 && !codeSent">
                Volver al Inicio
            </a>

            <!-- Enlace de ayuda -->
            <div class="help-link">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                ¿Necesita ayuda? Contacte al soporte técnico
            </div>
        </div>
    </div>
</div>